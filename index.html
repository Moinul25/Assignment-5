<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emergency Hotline Service</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="navbar">
      <div class="logo">
        <img src="./assets/logo.png" alt="logo" />
        <h1 class="logo-title">Emergency<br />Service</h1>
      </div>
      <div class="nav-right">
        <div class="nav-item">
          <span id="favCount">0</span>
          <img class="image" src="./assets/heart.png" alt="heart" />
        </div>
        <div class="nav-item">
          <span id="coinCount">100</span
          ><img class="image" src="./assets/coin.png" alt="coin" />
        </div>
        <div class="btn-copy"><span id="copyCount">0</span> Copy</div>
      </div>
    </div>

    <section class="hero">
      <img src="./assets/logo.png" alt="Bangladesh Logo" class="hero-logo" />
      <h1>Emergency Service Directory</h1>
      <p>
        Government Emergency Services at Your Fingertip – A Project by
        Government of the People’s Republic of Bangladesh
      </p>
    </section>

    <main class="main-section">
      <section class="cards" id="cards">
        <div class="container">
          <div class="card-header">
            <img
              src="./assets/emergency.png"
              alt="Emergency Icon"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>National Emergency Number</h3>
            <p>National Emergency</p>
            <h1>999</h1>
            <span class="tag">All</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img src="./assets/police.png" alt="police" class="icon" />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Police Helpline Number</h3>
            <p>Police</p>
            <h1>999</h1>
            <span class="tag">Police</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img
              src="./assets/fire-service.png"
              alt="Fire-Service"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Fire Service Number</h3>
            <p>Fire Service</p>
            <h1>999</h1>
            <span class="tag">Fire</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img
              src="./assets/ambulance.png"
              alt="Ambulance Icon"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Ambulance Service</h3>
            <p>Ambulance</p>
            <h1>1994-999999</h1>
            <span class="tag">Health</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img
              src="./assets/emergency.png"
              alt="Emergency Icon"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Women & Child Helpline</h3>
            <p>Women & Child Helpline</p>
            <h1>109</h1>
            <span class="tag">Help</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img
              src="./assets/emergency.png"
              alt="Emergency Icon"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Anti-Corruption Helpline</h3>
            <p>Anti-Corruption</p>
            <h1>106</h1>
            <span class="tag">Help</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>
        <div class="container">
          <div class="card-header">
            <img
              src="./assets/emergency.png"
              alt="Emergency Icon"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Electricity Helpline</h3>
            <p>Electricity Outage</p>
            <h1>16216</h1>
            <span class="tag">Help</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>

        <div class="container">
          <div class="card-header">
            <img src="./assets/brac.png" alt="brac Icon" class="icon" />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Brac Helpline</h3>
            <p>Brac</p>
            <h1>16445</h1>
            <span class="tag">NGO</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>
        <div class="container">
          <div class="card-header">
            <img
              src="./assets/Bangladesh-Railway.png"
              alt="Railway"
              class="icon"
            />
            <button class="heart-btn">
              <img src="./assets/heart-25.png" alt="" />
            </button>
          </div>
          <div class="card-body">
            <h3>Bangladesh Railway Helpline</h3>
            <p>Bangladesh Railway</p>
            <h1>163</h1>
            <span class="tag">Travel</span>
          </div>
          <div class="card-footer">
            <button class="copy-btn">
              <img class="img" src="./assets/icons8-copy-16.png" alt="" /> Copy
            </button>
            <button class="call-btn">
              <img class="img" src="./assets/icons8-call-80.png" alt="" /> Call
            </button>
          </div>
        </div>
      </section>

      <section class="history-panel" id="historyPanel">
        <div class="history-header">
          <h2><img src="./assets/clock.png" alt="" /> Call History</h2>
          <button class="clear-btn button" id="clearHistory">Clear</button>
        </div>

        <ul id="historyList" class="history-list"></ul>
      </section>
    </main>

    <script src="script.js"></script>
    <script>
      let coins = 100;
      let favs = 0;
      let copies = 0;

      const favCountEl = document.getElementById("favCount");
      const coinCountEl = document.getElementById("coinCount");
      const copyCountEl = document.getElementById("copyCount");
      const historyList = document.getElementById("historyList");

      function safeText(el, value) {
        if (el) el.textContent = String(value);
      }

      function getCardInfo(cardEl) {
        const nameEl = cardEl.querySelector(".card-body h3");
        const numberEl = cardEl.querySelector(".card-body h1");
        const name = nameEl ? nameEl.textContent.trim() : "Unknown Service";
        const number = numberEl ? numberEl.textContent.trim() : "N/A";
        return { name, number };
      }

      async function copyToClipboard(text) {
        try {
          if (navigator.clipboard?.writeText) {
            await navigator.clipboard.writeText(text);
          } else {
            const ta = document.createElement("textarea");
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand("copy");
            document.body.removeChild(ta);
          }
          return true;
        } catch (e) {
          return false;
        }
      }

      function addToHistory({ name, number }) {
        if (!historyList) return;
        const li = document.createElement("li");

        const now = new Date();
        const time = now.toLocaleTimeString([], {
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });

        li.innerHTML = `
          <div class="history-item-left">
            <strong class="service-name">${name}</strong>
            <span class="service-number">${number}</span>
          </div>
          <span class="call-time">${time}</span>
        `;

        li.style.display = "flex";
        li.style.justifyContent = "space-between";
        li.style.alignItems = "center";
        li.style.padding = "8px 12px";
        li.style.borderBottom = "1px solid #eee";

        historyList.prepend(li);
      }

      document.addEventListener("click", async (e) => {
        const heartBtn = e.target.closest(".heart-btn");
        if (heartBtn) {
          favs += 1;
          safeText(favCountEl, favs);

          heartBtn.style.transform = "scale(1.1)";
          setTimeout(() => (heartBtn.style.transform = ""), 150);
          return;
        }

        // Copy button
        const copyBtn = e.target.closest(".copy-btn");
        if (copyBtn) {
          const card = copyBtn.closest(".container");
          if (!card) return;
          const { number } = getCardInfo(card);

          const ok = await copyToClipboard(number);
          alert(
            ok
              ? `Copied ${number} to clipboard!`
              : `Copy failed. Number: ${number}`
          );

          copies += 1;
          safeText(copyCountEl, copies);
          return;
        }

        const callBtn = e.target.closest(".call-btn");
        if (callBtn) {
          const card = callBtn.closest(".container");
          if (!card) return;
          const { name, number } = getCardInfo(card);

          if (coins < 20) {
            alert("Not enough coins (need 20) to make a call.");
            return;
          }

          coins -= 20;
          safeText(coinCountEl, coins);

          // Alert
          alert(`Calling ${name} at ${number}...\n`);

          addToHistory({ name, number });
          return;
        }
      });

      // Clear history
      document.addEventListener("click", (e) => {
        const clearBtn = e.target.closest(".clear-btn");
        if (!clearBtn) return;

        if (!historyList) return;
        historyList.innerHTML = "";
      });
    </script>
  </body>
</html>
